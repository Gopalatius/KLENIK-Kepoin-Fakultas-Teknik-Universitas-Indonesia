<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>KLENIK</title>
  </head>
  <style></style>

  <body
    style="
      background-color: #29c5f6;
      text-align: center;
      margin: auto;
      position: absolute;
      top: 50%;
      left: 50%;
      -moz-transform: translateX(-50%) translateY(-50%);
      -webkit-transform: translateX(-50%) translateY(-50%);
      transform: translateX(-50%) translateY(-50%);
    "
  >
    <h1>Masuk ke KLENIK</h1>
    <h2>Login</h2>
    Username:
    <input type="text" id="username" /><br />
    Password :
    <input type="password" id="password" /><br />
    <input type="button" value="Submit" id="submits" onclick="submits()" />
    <p>Belum memiliki akun? <a href="/register">DAFTAR SEKARANG!</a></p>
  </body>
  <script>
    function submits() {
      let username = document.getElementById("username").value;
      let password = document.getElementById("password").value;
      fetch("/login", {
        method: "POST",
        body: JSON.stringify({
          username: username,
          password: password,
        }),
        headers: {
          "Content-type": "application/json; charset=UTF-8",
        },
      })
        .then((res) => res.text())
        .then((data) => {
          if (data === "done") {
            window.location.href = "/menu";
            window.alert("Login sukses!");
          } else {
            window.alert("Login gagal. Silakan coba lagi");
          }
        });
    }
  </script>
</html>
