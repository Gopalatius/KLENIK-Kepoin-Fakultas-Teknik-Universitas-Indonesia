<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>KLENIK</title>
	</head>
	<style></style>

	<body
		style="
			background-color: #29c5f6;
			text-align: center;
			margin: auto;
			position: absolute;
			top: 50%;
			left: 50%;
			-moz-transform: translateX(-50%) translateY(-50%);
			-webkit-transform: translateX(-50%) translateY(-50%);
			transform: translateX(-50%) translateY(-50%);
		"
	>
		<h1>Diskusi</h1>
		<a href="/diskusi/tanya"> Ingin bertanya?</a> <br /><br />
		<section id="list_pertanyaan">
			<!--
			<h2>
				<strong data-pertanyaan-id="">1. </strong>Question (<i>role</i>)
			</h2>
			<details>
				<summary>by: username</summary>
				<p>"Ini pertanyaannya?"</p>
			</details>
			nanti munculnya kurleb kek gini
			-->
		</section>
	</body>
	<script>
		const list = document.querySelector("#list_pertanyaan")
		fetch("/diskusi", { method: "POST" })
			.then((res) => res.json())
			.then((data) => {
				let count = 1
				let htmlString = ""
				data.forEach((row) => {
					 htmlString += `
					<h2>
						<strong data-pertanyaan-id="${row.pertanyaan_id}">${count}. </strong
						>${row.judul} (<i>${row.role}</i>)
					</h2>
					<details>
						<summary>by: ${row.username}</summary>
						<p>"${row.text}"</p>
					</details>
					<p>
						terjawab
						<a data-jumlah-jawaban="${row.jumlah_jawaban}" id="count${count}"
							>${row.jumlah_jawaban}</a
						>
						kali.
						<input type="button" value="Lihat jawaban?" onclick="window.location.href='/tanya/${row.pertanyaan_id}'" />
					</p>`
					count++
				})
				//pertanyaan_id, judul, role, username, text,jumlah jawaban
				list.insertAdjacentHTML('beforeEnd',htmlString)
			})
	</script>
</html>

